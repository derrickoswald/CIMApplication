{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/ShortCircuitOptionsSchema.json",
    "description": "Options for Short Circuit.",
    "type": "object",
    "additionalProperties": false,
    "properties":
    {
        "main_options":
        {
            "$ref": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/MainOptionsSchema.json",
            "description": "main() program options"
        },
        "spark_options":
        {
            "$ref": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/SparkOptionsSchema.json",
            "description": "Spark session options"
        },
        "cim_options":
        {
            "$ref": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/CIMReaderOptionsSchema.json",
            "description": "CIMReader options"
        },
        "cassandra_options":
        {
            "$ref": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/CassandraOptionsSchema.json",
            "description": "Cassandra options"
        },
        "id": {
            "default": "",
            "type": "string",
            "description": "run id on input, primary key for database on output"
        },
        "verbose": {
            "default": false,
            "type": "boolean",
            "description": "flag to output progress and interesting values"
        },
        "description": {
            "default": "",
            "type": "string",
            "description": "text describing this program execution"
        },
        "default_short_circuit_power_max": {
            "default": 200.0e6,
            "type": "number",
            "description": "maximum available short circuit power (at transformer primary) to be used if no equivalent injection is found (VA)"
        },
        "default_short_circuit_impedance_max": {
            "$ref": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/ComplexSchema.json",
            "default": { "re": 0.437785783, "im":  -1.202806555 },
            "description": "short circuit impedance to be used under maximum conditions if no equivalent injection is found (Ω)"
        },
        "default_short_circuit_angle_max": {
            "default": null,
            "type": ["number", "null"],
            "description": "short circuit angle to be used under maximum conditions if no equivalent injection is found, overrides impedance if specified (°)"
        },
        "default_short_circuit_power_min": {
            "default": 100.0e6,
            "type": "number",
            "description": "minimum available short circuit power (at transformer primary) to be used if no equivalent injection is found (VA)"
        },
        "default_short_circuit_impedance_min": {
            "$ref": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/ComplexSchema.json",
            "default": { "re": 0.875571570, "im": -2.405613110 },
            "description": "short circuit impedance to be used under minimum conditions if no equivalent injection is found (Ω)"
        },
        "default_short_circuit_angle_min": {
            "default": null,
            "type": ["number", "null"],
            "description": "short circuit angle to be used under minimum conditions if no equivalent injection is found, overrides impedance if specified (°)"
        },
        "default_transformer_power_rating": {
            "default": 630000,
            "type": "number",
            "description": "default transformer maximum power rating to be applied if a transformer has no ratedS specified (VA)"
        },
        "default_transformer_impedance": {
            "$ref": "https://raw.githubusercontent.com/derrickoswald/CIMApplication/master/json-schema/ComplexSchema.json",
            "default": { "re": 0.005899999998374999, "im": 0.039562482211875 },
            "description": "characteristic impedance to be applied if a transformer has no r or x specified (Ω)"
        },
        "base_temperature": {
            "default": 20.0,
            "type": "number",
            "description": "temperature of elements in the input CIM file (°C)"
        },
        "low_temperature": {
            "default": 60.0,
            "type": "number",
            "description": "low temperature for lowest resistance (maximum fault level) calculations (used for rating equipment) (°C)"
        },
        "high_temperature": {
            "default": 90.0,
            "type": "number",
            "description": "high temperature for highest resistance (minimum fault level) calculations (used for protections settings) (°C)"
        },
        "cmax": {
            "default": 1.0,
            "type": "number",
            "description": "voltage factor for maximum fault level (used for rating equipment), IEC60909 specifies 1.05 for voltages < 1kV, 1.1 for voltages > 1kV (dimensionless)"
        },
        "cmin": {
            "default": 0.90,
            "type": "number",
            "description": "voltage factor for minimum fault level (used for protections settings), IEC60909 specifies 0.95 for voltages < 1kV, 1.0 for voltages > 1kV (dimensionless)"
        },
        "worstcasepf": {
            "default": true,
            "type": "boolean",
            "description": "assume worst case motor power factor (cos term = 1.0, ignore cosphi)"
        },
        "cosphi": {
            "default": 0.5,
            "type": "number",
            "minimum": 0.0,
            "maximum": 1.0,
            "description": "power factor of (motor) load e.g. cos (60), the cosine of the motor starting current-voltage phase angle, typical values range from 0.2 (φ = 78°) to 0.6 (φ = 53°) during startup (dimensionless)"
        },
        "fuse_table": {
            "default": {
                "DIN": [
                    { "ik": 0.0, "rating": 0.0 },
                    { "ik": 65.0, "rating": 25.0 },
                    { "ik": 105.0, "rating": 40.0 },
                    { "ik": 140.0, "rating": 50.0 },
                    { "ik": 180.0, "rating": 63.0 },
                    { "ik": 240.0, "rating": 80.0 },
                    { "ik": 320.0, "rating": 100.0 },
                    { "ik": 380.0, "rating": 125.0 },
                    { "ik": 500.0, "rating": 160.0 },
                    { "ik": 650.0, "rating": 200.0 },
                    { "ik": 800.0, "rating": 250.0 },
                    { "ik": 1050.0, "rating": 315.0 },
                    { "ik": 1300.0, "rating": 400.0 },
                    { "ik": 1750.0, "rating": 500.0 },
                    { "ik": 2400.0, "rating": 630.0 }
                ]
            },
            "type": "object",
            "patternProperties": {
                "^.*$": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "ik": {
                                "type": "number",
                                "description": "maximum allowed short circuit current for this fuse"
                            },
                            "rating": {
                                "type": "number",
                                "description": "fuse rating (A)"
                            }
                        }
                    }
                }
            },
            "description": "recommended fuse sizing table as pairs of short circuit current⇒recommended fuse size, categorized by fuse type (e.g. 'SEV' or 'DIN')"
        },
        "messagemax": {
            "default": 5,
            "type": "integer",
            "description": "maximum number of warning and error messages to keep for each node"
        },
        "batchsize": {
            "default": 10000,
            "type": "integer",
            "description": "size of result collections for driver database writes"
        },
        "trafos": {
            "default": [],
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "transformer names to process"
        },
        "cable_impedance_limit": {
            "default": 5.0,
            "type": "number",
            "description": "cables with a R1 value higher than this are not calculated with gridlab, the reason is bad performance in gridlab with too high impedance values"
        },
        "workdir": {
            "default": "",
            "type": "string",
            "description": "shared directory (HDFS or NFS share) for intermediate results"
        },
        "calculate_public_lighting": {
            "default": false,
            "type": "boolean",
            "description": "whether to consider public lighting in the shortcircuit calculations"
        },
        "output": {
            "default": "SQLite",
            "type": "string",
            "pattern": "^SQLite$|^Cassandra$",
            "description": "type of output, SQLite or Cassandra"
        },
        "outputfile": {
            "default": "results/shortcircuit.db",
            "type": "string",
            "description": "SQLite output file name"
        },
        "keyspace": {
            "default": "cimapplication",
            "type": "string",
            "description": "Cassandra keyspace"
        },
        "replication": {
            "default": 1,
            "type": "integer",
            "description": "keyspace replication factor if the Cassandra keyspace needs creation",
            "minimum": 1
        }
    }
}